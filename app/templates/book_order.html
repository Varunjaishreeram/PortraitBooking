{% extends 'layout.html' %}

{% block content %}
<div class="container my-5">
    <div class="row">
        <!-- Scanner Image Section -->
        <div class="col-md-4 text-center p-3 bg-dark text-light rounded">
            <h5 class="mb-3">Scan to Pay</h5>
            <img src="{{ url_for('static', filename='scanner.jpg') }}" alt="Payment Scanner" class="img-fluid rounded shadow mb-3">
            <p class="fw-bold">UPI ID: <span class="text-info">client@upi</span></p>
            <p class="small text-warning">* Note: To make your portrait, at least 50% advanced payment is required. Without payment, your booking will not be considered.</p>
        </div>

        <!-- Booking Form Section -->
        <div class="col-md-8">
            <h2 class="text-center text-light mb-4">Book Your Portrait</h2>

            <form id="bookOrderForm" action="{{ url_for('book_order') }}" method="POST" enctype="multipart/form-data" class="p-4 rounded shadow" style="background-color: #2c2c2c;">
                <div class="mb-3">
                    
                    <input type="text" class="form-control" id="name" name="name" placeholder="Enter your full name" required>
                </div>

                <div class="mb-3">
                    
                    <input type="text" class="form-control" id="phone" name="phone" placeholder="Enter your phone number" required>
                </div>

                <div class="mb-3">
                    
                    <input type="email" class="form-control" id="email" name="email" placeholder="Enter your email address" required>
                </div>

                <div class="mb-3">
                    
                    <select class="form-select" id="portrait_type" name="portrait_type" required>
                        <option value="" disabled selected>Select Portrait Type</option>
                        <option value="basic">Basic Portrait (₹400)</option>
                        <option value="detailed">Detailed Portrait (₹600)</option>
                        <option value="premium">Premium Portrait (Customizable)</option>
                    </select>
                </div>
            

                <div class="mb-3">
                    
                    <textarea class="form-control" id="description" name="description" rows="3" placeholder="Enter additional details or preferences for your portrait (optional)"></textarea>
                </div>

                <div class="mb-3">
                    <label for="photo" class="form-label text-light">Upload Photo</label>
                    <input type="file" class="form-control" id="photo" name="photo" required>
                </div>

                <div class="mb-3">
                    <label for="payment_screenshot" class="form-label text-light">Upload Payment Screenshot</label>
                    <input type="file" class="form-control" id="payment_screenshot" name="payment_screenshot" required>
                </div>

                <div class="d-flex justify-content-center">
                    <button class="btn btn-primary" type="submit">
                        <span class="spinner-border spinner-border-sm me-2 d-none" id="spinner" role="status" aria-hidden="true"></span>
                        Submit
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    document.getElementById('bookOrderForm').addEventListener('submit', function (event) {
        // Show the spinner
        const spinner = document.getElementById('spinner');
        spinner.classList.remove('d-none');
        spinner.classList.add('d-inline-block');

        // Disable the submit button to prevent multiple submissions
        const submitButton = event.target.querySelector('button[type="submit"]');
        submitButton.disabled = true;
    });
</script>
{% endblock %}
